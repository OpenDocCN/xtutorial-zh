# 模型验证数据的类型注释

> 原文:[https://ASP . MVC-tutorial . com/models/types-of-model-validation-data annotations/](https://asp.mvc-tutorial.com/models/types-of-model-validation-dataannotations/)

在上一篇文章中，我们介绍了模型验证，并向您展示了它是多么容易开始。我们使用了几个与验证相关的数据注释，比如**【必需】**和**【字符串长度】**，但是如上所述，还有其他几种类型。在这篇文章中，我将浏览所有这些方法，让您对所有的可能性有一个更好的了解。

### [必需]

指定需要为此属性提供一个值。您应该知道不可空的值类型(例如整数和日期时间)总是必需的，因此您不需要为它们添加[Required]属性。对于字符串，您应该记住，空值将被视为空值，因此会导致验证错误。这种行为可以通过使用 **AllowEmptyStrings** 属性来改变:

```
[Required(AllowEmptyStrings = true)]
```

### [字符串长度]

允许您至少为一个字符串指定最大字符数(第一个非可选参数)，还可以指定最小字符数。这里有一个例子:

<input type="hidden" name="IL_IN_ARTICLE">

```
[StringLength(50, MinimumLength = 3)]
```

在这种情况下，如果值少于 3 个字符或多于 50 个字符，则无法验证该值。

### [范围]

使用[Range]属性，您可以为数值属性(int、float、double 等)指定最小值和最大值。).使用该属性时，需要最小值和最大值，如下所示:

```
[Range(1, 100)]
```

现在你的数值必须在 1 到 100 之间。

### [比较]

[Compare]属性允许您在有问题的属性和另一个属性之间建立比较，要求它们匹配。一个常见的用例是确保用户在“电子邮件”和“重复电子邮件”字段中输入相同的值:

```
[Compare("MailAddressRepeated")]
public string MailAddress { get; set; }

public string MailAddressRepeated { get; set; }
```

### 特定类型

如果你的字符串属于一个特定的类别，比如一个电话号码，ASP.NET MVC 可以为你提供开箱即用的基本验证。以下是您可以指定的类型列表:

*   **【信用卡】**:验证该物业具有信用卡格式。
*   **【email address】**:验证属性具有电子邮件格式。
*   **【电话】**:验证属性有电话号码格式。
*   **【Url】**:验证属性是否具有 Url 格式。

所有这些的共同点是它们只提供非常基本的验证。例如，电子邮件验证将只确保输入的值包含电子邮件地址的一些特征，比如包含@字符等等，但是仍然有可能输入实际上不是电子邮件地址的内容。为了获得更高的准确性和/或灵活性，可以使用*【regular expression】*属性，或者实现您自己的定制逻辑，如下一篇文章所述。

### [正则表达式]

当其他类型的验证都不够灵活时，最后的手段很可能是[RegularExpression]属性。它允许你指定一个正则表达式来验证你的属性值，并且只有匹配时才有效。正则表达式是一个太大的主题，无法在本文中处理，但是请允许我演示一下它们到底有多强大。假设您的 WebUser 类有一个 MemberId，它必须采用以下特定格式:

```
xx-0000-0000
```

或者换句话说:两个字母，一个破折号然后两组四个数字中间有一个破折号，像 *zx-1234-5678* 。我们可以为此创建一个正则表达式，并将其放入我们的*【正则表达式】*属性中:

```
[RegularExpression("[a-z]{2}-[0-9]{4}-[0-9]{4}")]
public string MemberId { get; set; }
```

正则表达式的可能性几乎是无限的，除了验证之外，它们还可以用于许多其他情况，所以学习如何使用它们是一项不错的投资！如果你想开始学习正则表达式，这里有几个链接:[正则表达式教程&备忘单](https://medium.com/factory-mind/regex-tutorial-a-simple-cheatsheet-by-examples-649dc1c3f285) / [正则表达式交互教程](https://regexone.com/)。

## 摘要

由于 ASP.NET MVC 框架中已经内置了广泛的验证可能性，您可以通过添加一个简单的属性来轻松地验证您的大多数属性。如果您需要更多的灵活性，您总是可以使用**【regular expression】**属性或者验证逻辑的自定义实现，我们将在下一篇文章中讨论。

* * *