# 简介

> 原文：<https://asp.mvc-tutorial.com/tag-helpers/introduction/>

在这篇文章中，我将简单介绍一下 ASP/ASP。NET 历史，并告诉你微软是如何提出标签助手这个概念的。如果您只是想看看它们是如何使用的，并且您并不太关心标记助手的发展历程，那么您可以选择跳到文章底部的摘要，然后继续阅读下一篇文章，在下一篇文章中，我们将看到各种标记助手是如何工作的。

当微软用我们今天所称的 ASP.NET web forms 取代 ASP Classic 时，他们将控件的概念引入了 web 编码领域。在为桌面创建应用程序时，这是一个众所周知的概念，但不是为 web。控件允许你通过编写标签来获得许多现成的功能，这些标签在到达浏览器之前被 ASP.NET 解释并转换成常规的 HTML 和 CSS。

## 从标记到服务器控件

微软基本上为所有常见的 HTML 控件实现了服务器控件，如 **asp:TextBox** (将被呈现为输入或 TEXTAREA HTML 标签)或 **asp:Label** 。然而，他们还用 asp:DataGrid 之类的控件超越了这一点，这些控件将接受许多参数和选项，然后根据配置和数据源呈现为包含列和行的完整表格。

不幸的是，对于所有开发人员来说，ASP.NET web forms 服务器控件的概念从来都不是完全自然的。最初创建服务器控件是为了节省时间和代码，它允许您用几行标记快速实现甚至是高级的功能。但是你会发现你自己写了更多的代码，来解决服务器控件不完全支持的奇怪情况，而不是节省时间。

关于 ASP.NET web forms 服务器控件的另一个主要抱怨是缺乏对生成的 HTML 的控制——通过将实际的 HTML 抽象成服务器控件，ASP.NET web forms 将负责向浏览器生成输出，这成为一个问题有两个原因:

<input type="hidden" name="IL_IN_ARTICLE">

首先，有时产生的 HTML 不能在所有浏览器中工作。回到 ASP.NET web forms 的巅峰时期，不同的浏览器对你提供的 HTML 和 CSS 的反应有很大的不同。由于您无法控制生成的 HTML 和 CSS，您可能会遇到渲染问题，现在这些问题几乎无法解决。

其次，很多纯粹主义者要求 HTML 以特定的方式格式化，尽管浏览器并不在乎。举个例子，你可以用大写或小写来写 HTML 标签，你可以用单引号或双引号来表示属性/值等等。浏览器并不关心，但是许多程序员习惯于区分大小写的编程语言，当他们编写的 HTML 与服务器控件生成的 HTML 格式不同时，他们的眼睛会痛。

## 从服务器控件到 HTML 助手

出于这个原因，微软决定在实现 ASP.NET MVC 时完全省略服务器控件。他们听取了开发人员的意见，开发人员希望完全控制生成的标记，即使他们必须自己编写。为此，他们发明了 Razor 语言(在本教程中已经详细解释过了)，它允许您将 `if`语句和循环之类的编程逻辑与常规标记结合起来。

人们普遍对这种新方法感到满意，但还是有所欠缺。微软总是努力让开发人员的事情变得更容易，现在，写了太多的标记和 Razor 代码，没有能力将模型数据与其在视图中的可视化表示联系起来。由于这个原因，他们引入了 HTML 助手。

HTML 助手的概念允许您为模型数据生成标记，尤其是在生成表单及其元素时。例如，如果您要为模型的 Title 属性创建一个输入字段，您应该编写如下标记:

```
<input type="text" name="Title" value="@Model.Title" />
```

随着 HTML 助手的引入，您可以调用 **Html** 助手类上的 **TextBoxFor()** 方法来自动生成这个标签:

```
@Html.TextBoxFor(model => model.Title)
```

它更短，并且您获得了 Razor 代码的编译时检查的额外好处——如果 Title 属性突然停止存在，例如，因为您重命名了它，编译器将会报错。

## 从 HTML 助手到标签助手

多亏了 HTML 助手，将模型数据与视图中的标记绑定在一起现在变得容易多了，但是服务器控件时代的问题仍然存在:由于标记已经被抽象成助手方法，这些助手方法现在负责生成 HTML，并且它们还必须足够灵活以支持您可能想要使用它们的所有方式。考虑我们之前的例子，但是现在假设我们想在生成的 HTML 中添加几个带有值的属性:

```
@Html.TextBoxFor(model => model.Title, new { @class = "form-control", style = "font-weight: bold; font-size: 120%;"  })
```

这个例子现在没有以前那么优雅了，只是因为我们想给输入标签添加一个带有值的**类**和**样式**属性。对于一些开发人员来说，这种方法也不自然——他们不喜欢 Razor 语法中 C#代码与内联 CSS 甚至 JavaScript 的混合。尤其是在大型表单中，常规 HTML 标记和对 HTML Helper 方法的 Razor 调用的不断混合看起来非常混乱。

微软决定通过从两个世界中取长补短来解决这个问题:使用标签助手，你可以编写常规的 HTML 标签而不是 Razor 命令，但是你可以混合定制的服务器端属性，这将允许你，例如，轻松地绑定到你的模型的数据。有了标记助手，我们可以把前面的例子改写成这样:

```
<input asp-for="Title" class="form-control" style="font-weight: bold; font-size: 120%;" />
```

注意，唯一不像常规 HTML 标签/属性设置的是 **asp-for** 属性。这就是 ASP.NET MVC 如何从模型中知道这个控件是为哪个属性创建的——这个信息将被用来生成输入字段的名称(在这个例子中是“Title ”),值也将被自动添加。还会为控件生成一个 **id** 属性，但是您可以通过添加自己的 id 属性和值来覆盖这个值！

## 标签助手与 HTML 助手

综上所述，有一点是清楚的:ASP.NET 平台和大多数其他平台一样，都在不断发展。新概念不断增加，而旧的概念可能会被否决。然而，在我写这篇文章的时候，HTML 助手仍然是相关的，并且是 ASP.NET MVC 中一个可行的选择。您可能更喜欢它们的语法或工作方式，但是除此之外，它们还能做一些事情，而标签助手还不能做这些事情。

因此，在本教程中，您还会看到标签助手和 HTML 助手的使用。这很好——使用您认为最适合手头任务的任何方法。毕竟，标签助手和 HTML 助手都是语法上的糖:它们帮助你用更少的按键完成一个平凡的任务。

## 摘要

ASP.NET MVC 标记助手将帮助你为你的视图生成标记，特别是当目的是将数据从你的模型绑定到你的视图中的控件/标记时。与以前的方法不同，如服务器控件和 HTML 助手，您不必转换到另一种语言来连接模型和视图，您仍然可以控制生成的标记。换句话说，当您创建视图时，标记助手将使许多事情变得更容易。在下面的文章中，我们将介绍所有内置的标记助手，这样您就可以看到它们是多么强大而又易于使用。

* * *